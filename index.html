<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>2D mini FPS</title>
<style>
  :root{
    --bg:#222; --panel:#2b2b2b; --panel-border:#444; --text:#eaeaea; --muted:#bdbdbd;
    --btn-bg:#333; --btn-text:#f2f2f2; --btn-border:#555; --btn-bg-hover:#3b3b3b; --btn-bg-active:#2d2d2d; --focus:#8a8a8a;
  }
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Noto Sans KR,sans-serif;overflow:hidden}

  /* 게임 화면 래퍼: 초기 비표시 (메뉴 먼저) */
  .app-shell{display:none}
  .app-shell.show{display:block}

  /* 상단 UI */
  #ui{width:800px;margin:10px auto 0;display:flex;gap:8px;align-items:center;justify-content:flex-end}
  #gameCanvas{background:#333;display:block;margin:0 auto;border:3px solid #555}

  button{font-weight:700;border-radius:10px;border:1px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-text);padding:8px 12px;cursor:pointer;user-select:none;transition:background .15s,transform .05s,filter .15s}
  button:hover{background:var(--btn-bg-hover)}
  button:active{background:var(--btn-bg-active);transform:translateY(1px)}
  button:focus-visible{outline:2px solid var(--focus);outline-offset:2px}

  /* 조작법 모달 */
  #instructionsModal{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;justify-content:center;align-items:center;color:#fff;z-index:80}
  #instructionsContent{background:#444;padding:20px 24px;border-radius:14px;max-width:820px;width:min(92vw,820px);text-align:left;line-height:1.6;box-shadow:0 18px 40px rgba(0,0,0,.45)}
  #instructionsContent h2{margin:0 0 10px}
  .inst-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  .inst-card{background:#3e3e3e;border:1px solid #555;border-radius:12px;padding:12px}
  .inst-card h3{margin:0 0 8px;font-size:16px;color:#e9f2ff}
  .inst-note{font-size:13px;color:#d1d1d1}
  .inst-list{margin:6px 0 0 0;padding-left:18px}
  .inst-list li{margin:4px 0}
  .kbd{display:inline-flex;align-items:center;justify-content:center;min-width:22px;padding:2px 6px;margin:0 2px;border-radius:6px;border:1px solid #606060;background:#2f2f2f;box-shadow:inset 0 -1px 0 rgba(0,0,0,.35);font-weight:800;font-size:12px;color:#f5f5f5}
  .keyrow{display:flex;flex-wrap:wrap;gap:6px}
  .inst-footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px;gap:12px}
  .inst-section{margin-top:10px}
  .legend{font-size:12px;color:#cfd8dc}
  .ok{color:#b7ffc9}
  .warn{color:#ffe8a3}
  .muted{color:#c9c9c9}

  /* 조작키 패널 */
  #controls{width:800px;margin:8px auto 0;display:grid;gap:10px;grid-template-columns:1fr 1fr}
  .panel{background:var(--panel);border:2px solid var(--panel-border);border-radius:12px;padding:10px}
  .panel h3{margin:0 0 8px;font-size:16px;color:#d8d8d8}
  .keys{display:grid;grid-template-columns:repeat(5,1fr);gap:6px;align-items:stretch}
  .keybtn{background:#3a3a3a;border:1px solid #555;border-radius:8px;padding:8px 6px;font-weight:700;text-align:center;color:#eaeaea;display:flex;justify-content:center;align-items:center;height:100%}
  .keybtn.disabled{opacity:.5;cursor:not-allowed}
  .blinkSlot{display:flex;flex-direction:column;align-items:center;gap:4px;height:100%}
  .cd{font-size:12px;color:var(--muted);height:14px;line-height:14px}
  .hint{font-size:12px;color:#cfd8dc;text-align:center}

  /* 키 하이라이트(민트색) */
  .keybtn.active{background:linear-gradient(135deg,#00ffcc,#66ffff);color:#052a24;border-color:#7de3e3}
  .keybtn.blinkReady{background:linear-gradient(135deg,#00ffcc,#66ffff);color:#052a24;border-color:#7de3e3}

  /* 오버레이 공통 */
  .overlay{position:fixed;inset:0;display:none;justify-content:center;align-items:center;background:rgba(0,0,0,.65);backdrop-filter:saturate(120%) blur(3px);z-index:60}
  .overlay.show{display:flex}

  /* 메뉴 화면 */
  .menuCard{width:min(760px,92vw);background:rgba(44,44,44,.92);border:1px solid #3d3d3d;border-radius:18px;padding:28px 28px 24px;box-shadow:0 20px 40px rgba(0,0,0,.45)}
  .menuTitle{margin:0 0 6px;font-size:24px;text-align:center;color:#ededed}
  .menuDesc{margin:0 0 18px;font-size:14px;text-align:center;color:#bfbfbf}
  .menuRow{display:flex;justify-content:center;gap:36px;margin:14px 0 18px 0}
  .menuBtn{flex:0 0 auto;min-width:140px;max-width:200px;padding:10px 14px;font-size:16px;font-weight:800;border-radius:12px;border:1px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-text)}
  .menuBtn:hover{background:var(--btn-bg-hover)}
  .menuSub{display:flex;justify-content:center;margin-top:8px}
  .menuSub .menuBtn{min-width:220px;max-width:280px}

  /* 1P 개발중 모달 */
  #onePModal{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;justify-content:center;align-items:center;z-index:90}
  .onePCard{background:#2f2f2f;border:1px solid #474747;border-radius:14px;padding:22px 24px;max-width:420px;text-align:center}
  .onePCard h3{margin:0 0 8px;font-size:18px}
  .onePCard p{margin:0 0 12px;color:#cfcfcf}
</style>
</head>
<body>
  <!-- 게임 UI -->
  <div id="appShell" class="app-shell">
    <div id="ui"><button id="showInstructions">조작법 보기</button></div>
    <canvas id="gameCanvas" width="800" height="500"></canvas>
    <div id="controls">
      <div class="panel" id="panelP1">
        <h3>플레이어 1 (파란색)</h3>
        <div class="keys">
          <div></div>
          <button class="keybtn" data-key="w">W</button>
          <div></div>
          <div class="blinkSlot">
            <button class="keybtn" id="btnP1Blink">점멸</button>
            <div class="cd" id="p1BlinkCd">준비완료</div>
            <div class="hint">Q·E·LShift·Space</div>
          </div>
          <div></div>
          <button class="keybtn" data-key="a">A</button>
          <button class="keybtn" data-key="s">S</button>
          <button class="keybtn" data-key="d">D</button>
        </div>
      </div>
      <div class="panel" id="panelP2">
        <h3>플레이어 2 (빨간색)</h3>
        <div class="keys">
          <div></div>
          <button class="keybtn" data-key="arrowup">↑</button>
          <div></div>
          <div class="blinkSlot">
            <button class="keybtn" id="btnP2Blink">점멸</button>
            <div class="cd" id="p2BlinkCd">준비완료</div>
            <div class="hint">M·/·RShift·Enter·RCtrl</div>
          </div>
          <div></div>
          <button class="keybtn" data-key="arrowleft">←</button>
          <button class="keybtn" data-key="arrowdown">↓</button>
          <button class="keybtn" data-key="arrowright">→</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 메인 메뉴 -->
  <div id="mainMenu" class="overlay show">
    <div class="menuCard">
      <h2 class="menuTitle">미니 1대1 FPS</h2>
      <p class="menuDesc">모드를 선택하세요</p>
      <div class="menuRow">
        <button id="btnMenu1P" class="menuBtn">1P</button>
        <button id="btnMenu2P" class="menuBtn">2P</button>
      </div>
      <div class="menuSub"><button id="btnMenuHowTo" class="menuBtn">조작법</button></div>
    </div>
  </div>

  <!-- 일시정지 메뉴 -->
  <div id="pauseMenu" class="overlay">
    <div class="menuCard">
      <h2 class="menuTitle">일시정지</h2>
      <div class="menuRow" style="gap:20px">
        <button id="btnResume" class="menuBtn">계속하기</button>
        <button id="btnGotoMenu" class="menuBtn">메뉴화면</button>
      </div>
    </div>
  </div>

  <!-- 조작법 모달 (개편) -->
  <div id="instructionsModal">
    <div id="instructionsContent">
      <h2>조작법 · 단축키 안내</h2>

      <div class="inst-grid">
        <div class="inst-card">
          <h3>빠른 시작</h3>
          <ul class="inst-list">
            <li>각 플레이어는 자동으로 탄환을 발사합니다. <span class="muted">(재장전 간격 존재)</span></li>
            <li>이동하며 상대 탄환을 피하고, <b>점멸</b>로 위치를 순간 이동해 유리한 각을 잡으세요.</li>
            <li class="warn">라운드 종료 시 <b>3초 카운트다운</b> 동안 조작이 잠깁니다.</li>
          </ul>
        </div>
        <div class="inst-card">
          <h3>일시정지 · ESC</h3>
          <ul class="inst-list">
            <li><span class="kbd">ESC</span> (게임 중): <b>일시정지</b> 메뉴 열기/닫기</li>
            <li class="inst-note">일시정지 메뉴에서 <b>계속하기</b> 또는 <b>메뉴화면</b>으로 이동</li>
            <li class="muted">메인 메뉴 화면에서는 <span class="kbd">ESC</span> 입력이 무시됩니다.</li>
          </ul>
        </div>
      </div>

      <div class="inst-grid inst-section">
        <div class="inst-card">
          <h3>P1 (파란색)</h3>
          <div class="keyrow">
            <span class="kbd">W</span><span class="muted">위</span>
            <span class="kbd">A</span><span class="muted">좌</span>
            <span class="kbd">S</span><span class="muted">하</span>
            <span class="kbd">D</span><span class="muted">우</span>
          </div>
          <div class="inst-section">
            <div class="inst-note"><b>점멸</b> 키 (아래 중 아무 키):</div>
            <div class="keyrow"><span class="kbd">Q</span><span class="kbd">E</span><span class="kbd">LShift</span><span class="kbd">Space</span></div>
            <ul class="inst-list">
              <li>누르고 있는 이동 방향으로 <b>자신 크기 × 2</b>만큼 순간 이동</li>
              <li>방향키를 누르지 않을 땐 <b>최근 이동 방향</b>으로 점멸</li>
              <li class="warn">점멸 후 <b>2라운드 쿨다운</b> · 카운트다운 중 사용 불가</li>
            </ul>
          </div>
        </div>

        <div class="inst-card">
          <h3>P2 (빨간색)</h3>
          <div class="keyrow">
            <span class="kbd">←</span><span class="muted">좌</span>
            <span class="kbd">→</span><span class="muted">우</span>
            <span class="kbd">↑</span><span class="muted">위</span>
            <span class="kbd">↓</span><span class="muted">하</span>
          </div>
          <div class="inst-section">
            <div class="inst-note"><b>점멸</b> 키 (아래 중 아무 키):</div>
            <div class="keyrow"><span class="kbd">M</span><span class="kbd">/</span><span class="kbd">RShift</span><span class="kbd">Enter</span><span class="kbd">RCtrl</span></div>
            <ul class="inst-list">
              <li>P1과 동일한 규칙으로 점멸</li>
              <li class="warn">점멸 후 2라운드 쿨다운 · 카운트다운 중 사용 불가</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="inst-grid inst-section">
        <div class="inst-card">
          <h3>쿨다운 · 카운트다운 표시</h3>
          <ul class="inst-list">
            <li>화면 하단 패널의 <b>점멸</b> 버튼 아래에 상태 표시
              <ul class="inst-list">
                <li class="ok">준비완료: 즉시 사용 가능 (버튼 하이라이트)</li>
                <li class="warn">쿨다운: <b>N 라운드</b> 남음</li>
                <li class="muted">대기(카운트중): 라운드 시작 전 3초</li>
              </ul>
            </li>
          </ul>
        </div>
        <div class="inst-card">
          <h3>마우스/터치 보조</h3>
          <ul class="inst-list">
            <li>하단 패널의 W/A/S/D/←/→/↑/↓ 버튼을 <b>누르고 있는 동안</b> 동일 입력으로 인식</li>
            <li>점멸 버튼 클릭 시, <b>해당 플레이어 점멸</b> (쿨다운/카운트다운 중 비활성)</li>
          </ul>
        </div>
      </div>

      <div class="inst-footer">
        <span class="legend">Tip: 점멸 후 즉시 이동해 맞는 각을 피하세요.</span>
        <button id="closeInstructions">닫기</button>
      </div>
    </div>
  </div>

  <!-- 1P 개발중 팝업 -->
  <div id="onePModal">
    <div class="onePCard">
      <h3>개발중입니다.</h3>
      <p>1인 플레이 모드는 준비 중입니다.</p>
      <button id="closeOneP">닫기</button>
    </div>
  </div>

<script>
/* === 기본 참조 === */
const appShell=document.getElementById('appShell');
const canvas=document.getElementById('gameCanvas');
const ctx=canvas.getContext('2d');
const width=canvas.width,height=canvas.height;

/* === 상태 === */
let inMenu=true,isPaused=false,isCountingDown=false,countdownValue=3,countdownTimer=null,rafId=null;
const keys={};

/* === 키 바인딩 === */
const blinkBindings={p1:{keys:['q','e'],codes:['ShiftLeft','Space']},p2:{keys:['m','/'],codes:['ShiftRight','Enter','ControlRight']}};

/* === 엔티티 === */
class Player{
  constructor(x,y,color,controls){
    this.x=x;this.y=y;this.color=color;this.size=30;this.speed=4;this.score=0;this.controls=controls;
    this.bullets=[];this.fireInterval=15;this.cooldown=0;this.blinkCooldownRounds=0;this.lastMoveDir={x:(color==='blue'?1:-1),y:0};
  }
  move(k){
    if(k[this.controls.up]&&this.y-this.speed>0){this.y-=this.speed;this.lastMoveDir={x:0,y:-1}}
    if(k[this.controls.down]&&this.y+this.speed+this.size<height){this.y+=this.speed;this.lastMoveDir={x:0,y:1}}
    if(k[this.controls.left]&&this.x-this.speed>0){this.x-=this.speed;this.lastMoveDir={x:-1,y:0}}
    if(k[this.controls.right]&&this.x+this.speed+this.size<width){this.x+=this.speed;this.lastMoveDir={x:1,y:0}}
  }
  autoShoot(){ if(isCountingDown) return; if(this.cooldown<=0) this.shoot(); else this.cooldown--; }
  shoot(){
    const dir=this.color==='blue'?1:-1;
    const bx=this.color==='blue'?this.x+this.size:this.x;
    const by=this.y+this.size/2;
    this.bullets.push(new Bullet(bx,by,dir)); this.cooldown=this.fireInterval;
  }
  blink(k){
    if(isCountingDown||this.blinkCooldownRounds>0) return;
    let dx=0,dy=0;
    if(k[this.controls.right])dx+=1; if(k[this.controls.left])dx-=1;
    if(k[this.controls.down])dy+=1;  if(k[this.controls.up])dy-=1;
    if(dx===0&&dy===0){ dx=this.lastMoveDir.x; dy=this.lastMoveDir.y; }
    if(dx===0&&dy===0) return;
    const len=Math.hypot(dx,dy); dx/=len; dy/=len;
    const dist=this.size*2; let nx=this.x+Math.round(dx*dist), ny=this.y+Math.round(dy*dist);
    nx=Math.max(0,Math.min(nx,width-this.size)); ny=Math.max(0,Math.min(ny,height-this.size));
    this.x=nx; this.y=ny; this.blinkCooldownRounds=2; updateControlVisuals();
  }
  updateBullets(opp){
    for(let i=this.bullets.length-1;i>=0;i--){
      const b=this.bullets[i]; b.move();
      if(b.x<0||b.x>width){ this.bullets.splice(i,1); }
      else if(b.collidesWith(opp)){ this.score++; this.bullets.splice(i,1); endRound(); break; }
    }
  }
  draw(){ ctx.fillStyle=this.color; ctx.fillRect(this.x,this.y,this.size,this.size); this.bullets.forEach(b=>b.draw()); }
}
class Bullet{
  constructor(x,y,dir){ this.x=x; this.y=y; this.r=6; this.v=8*dir; }
  move(){ this.x+=this.v; }
  collidesWith(p){ return (this.x>p.x && this.x<p.x+p.size) && (this.y>p.y && this.y<p.y+p.size); }
  draw(){ ctx.fillStyle='#fff'; ctx.beginPath(); ctx.arc(this.x,this.y,this.r,0,Math.PI*2); ctx.fill(); }
}

/* === 플레이어 === */
const player1=new Player(50,height/2-15,'blue',{up:'w',down:'s',left:'a',right:'d'});
const player2=new Player(width-80,height/2-15,'red',{up:'arrowup',down:'arrowdown',left:'arrowleft',right:'arrowright'});

/* === 루프 === */
function startLoop(){ if(rafId) cancelAnimationFrame(rafId); const loop=()=>{ rafId=requestAnimationFrame(loop); tick(); render(); }; loop(); }
function stopLoop(){ if(rafId){ cancelAnimationFrame(rafId); rafId=null; } }
function tick(){ if(!inMenu && !isPaused){ player1.move(keys); player2.move(keys); player1.autoShoot(); player2.autoShoot(); player1.updateBullets(player2); player2.updateBullets(player1); } }
function render(){ ctx.clearRect(0,0,width,height); if(!inMenu){ player1.draw(); player2.draw(); drawScores(); drawCountdown(); } }

/* === 라운드 === */
function resetPositions(){ player1.x=50; player1.y=height/2-player1.size/2; player2.x=width-80; player2.y=height/2-player2.size/2; player1.bullets=[]; player2.bullets=[]; }
function decrementBlinkRoundCooldowns(){ if(player1.blinkCooldownRounds>0) player1.blinkCooldownRounds--; if(player2.blinkCooldownRounds>0) player2.blinkCooldownRounds--; updateControlVisuals(); }
function startCountdown(){ isCountingDown=true; countdownValue=3; if(countdownTimer) clearInterval(countdownTimer); countdownTimer=setInterval(()=>{ countdownValue--; if(countdownValue<=0){ clearInterval(countdownTimer); countdownTimer=null; isCountingDown=false; updateControlVisuals(); } },1000); }
function endRound(){ decrementBlinkRoundCooldowns(); resetPositions(); startCountdown(); }

/* === HUD === */
function drawScores(){ ctx.font='20px Arial'; ctx.fillStyle='blue'; ctx.fillText(`P1: ${player1.score}`,20,30); ctx.fillStyle='red'; ctx.fillText(`P2: ${player2.score}`,width-100,30); }
function drawCountdown(){ if(!isCountingDown) return; ctx.save(); ctx.fillStyle='rgba(0,0,0,.35)'; ctx.fillRect(0,0,width,height); ctx.fillStyle='#fff'; ctx.font='72px Arial'; ctx.textAlign='center'; ctx.textBaseline='middle'; ctx.fillText(String(countdownValue),width/2,height/2); ctx.restore(); }

/* === 입력 === */
addEventListener('keydown',e=>{
  const k=e.key.toLowerCase(), c=e.code;
  if(e.key==='Escape'){ if(!inMenu) togglePause(); return; }  // 메뉴 중엔 무시
  if(inMenu) return;
  keys[k]=true;
  if(e.repeat){ updateControlVisuals(); return; }
  if(blinkBindings.p1.keys.includes(k)||blinkBindings.p1.codes.includes(c)) player1.blink(keys);
  if(blinkBindings.p2.keys.includes(k)||blinkBindings.p2.codes.includes(c)) player2.blink(keys);
  updateControlVisuals();
});
addEventListener('keyup',e=>{ if(inMenu) return; keys[e.key.toLowerCase()]=false; updateControlVisuals(); });

/* 마우스/터치 가상 입력 */
function bindHoldButton(btn,keyName){
  const down=()=>{ if(inMenu) return; keys[keyName]=true; updateControlVisuals(); };
  const up  =()=>{ if(inMenu) return; keys[keyName]=false; updateControlVisuals(); };
  btn.addEventListener('mousedown',down); btn.addEventListener('mouseup',up); btn.addEventListener('mouseleave',up);
  btn.addEventListener('touchstart',e=>{ e.preventDefault(); down(); },{passive:false});
  btn.addEventListener('touchend',e=>{ e.preventDefault(); up(); },{passive:false});
  btn.addEventListener('touchcancel',e=>{ e.preventDefault(); up(); },{passive:false});
}
document.querySelectorAll('#panelP1 .keybtn[data-key]').forEach(btn=>bindHoldButton(btn,btn.dataset.key));
document.querySelectorAll('#panelP2 .keybtn[data-key]').forEach(btn=>bindHoldButton(btn,btn.dataset.key));

/* 점멸 버튼 클릭 */
document.getElementById('btnP1Blink').addEventListener('click',()=>{ if(inMenu) return; if(player1.blinkCooldownRounds===0 && !isCountingDown) player1.blink(keys); updateControlVisuals(); });
document.getElementById('btnP2Blink').addEventListener('click',()=>{ if(inMenu) return; if(player2.blinkCooldownRounds===0 && !isCountingDown) player2.blink(keys); updateControlVisuals(); });

/* === 화면 전환 === */
const mainMenu=document.getElementById('mainMenu');
const pauseMenu=document.getElementById('pauseMenu');
const onePModal=document.getElementById('onePModal');
const closeOneP=document.getElementById('closeOneP');
const modal=document.getElementById('instructionsModal');
const btnShowInstr=document.getElementById('showInstructions');

/* 1P: 중앙 팝업 */
document.getElementById('btnMenu1P').addEventListener('click',()=>{ onePModal.style.display='flex'; });
closeOneP.addEventListener('click',()=>{ onePModal.style.display='none'; });

/* 2P: 게임 진입 */
document.getElementById('btnMenu2P').addEventListener('click', enterPvP);

/* 메뉴에서 조작법 보기 (메뉴 숨기고 모달 최상위) */
document.getElementById('btnMenuHowTo').addEventListener('click',()=>{
  mainMenu.classList.remove('show');
  modal.style.display='flex';
  modal.dataset.returnToMenu='true';
});

/* 게임 화면에서도 조작법 보기 */
btnShowInstr.addEventListener('click',()=>{ modal.style.display='flex'; modal.dataset.returnToMenu=''; });
document.getElementById('closeInstructions').addEventListener('click',()=>{
  modal.style.display='none';
  if(modal.dataset.returnToMenu==='true' && inMenu){
    mainMenu.classList.add('show');
    modal.dataset.returnToMenu='';
  }
});

/* 진입/복귀 */
function enterPvP(){
  inMenu=false; mainMenu.classList.remove('show'); appShell.classList.add('show');
  player1.score=0; player2.score=0; resetPositions(); startCountdown(); updateControlVisuals();
  startLoop();
}
function backToMenu(){
  stopLoop(); ctx.clearRect(0,0,width,height);
  inMenu=true; isPaused=false; appShell.classList.remove('show'); mainMenu.classList.add('show');
  updateControlVisuals();
}

/* ESC 일시정지 */
document.getElementById('btnResume').addEventListener('click',()=>{ isPaused=false; pauseMenu.classList.remove('show'); });
document.getElementById('btnGotoMenu').addEventListener('click',()=>{ pauseMenu.classList.remove('show'); backToMenu(); });
function togglePause(){ isPaused=!isPaused; pauseMenu.classList.toggle('show',isPaused); }

/* 키/쿨타임 시각 갱신 */
function updateControlVisuals(){
  document.querySelectorAll('.keybtn[data-key]').forEach(btn=>{
    const k=btn.dataset.key;
    btn.classList.toggle('active', !!keys[k] && !inMenu);
  });
  const p1Cd=document.getElementById('p1BlinkCd');
  const p2Cd=document.getElementById('p2BlinkCd');
  const btnP1=document.getElementById('btnP1Blink');
  const btnP2=document.getElementById('btnP2Blink');

  if(inMenu){ btnP1.classList.add('disabled'); btnP1.classList.remove('blinkReady'); p1Cd.textContent='메뉴 중'; }
  else if(player1.blinkCooldownRounds>0){ btnP1.classList.add('disabled'); btnP1.classList.remove('blinkReady'); p1Cd.textContent=`쿨다운: ${player1.blinkCooldownRounds}라운드`; }
  else if(isCountingDown){ btnP1.classList.add('disabled'); btnP1.classList.remove('blinkReady'); p1Cd.textContent='대기(카운트중)'; }
  else { btnP1.classList.remove('disabled'); btnP1.classList.add('blinkReady'); p1Cd.textContent='준비완료'; }

  if(inMenu){ btnP2.classList.add('disabled'); btnP2.classList.remove('blinkReady'); p2Cd.textContent='메뉴 중'; }
  else if(player2.blinkCooldownRounds>0){ btnP2.classList.add('disabled'); btnP2.classList.remove('blinkReady'); p2Cd.textContent=`쿨다운: ${player2.blinkCooldownRounds}라운드`; }
  else if(isCountingDown){ btnP2.classList.add('disabled'); btnP2.classList.remove('blinkReady'); p2Cd.textContent='대기(카운트중)'; }
  else { btnP2.classList.remove('disabled'); btnP2.classList.add('blinkReady'); p2Cd.textContent='준비완료'; }
}
</script>
</body>
</html>
